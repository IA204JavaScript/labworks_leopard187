# **Лабораторная работа №4:** *Работа с DOM-деревом и событиями в JavaScript*

__Студент:__  *Пармакли Леонид IA2404ru*  
__Проверил:__  *Алексей Муринец*  
__Дата:__ 07.05.2025

*[Основная ветка репозитория](https://github.com/IA204JavaScript/labworks_leopard187)*

---

## 1. Инструкции по запуску проекта

Проект представляет собой сайт, который включат несколько модулей js. Браузер не разрешает запускать сайт с несколькими модулями с локального компьютера из-за политики безопасности, поэтому для запуска потребуется расширение Live Server для Visual Studio Code. 

```bash
git clone --single-branch -b Lab4 https://github.com/IA204JavaScript/labworks_leopard187.git
```

---

## 2. Задание

### Шаг 1. Настройка и структурирование проекта

1. Создайте корневую папку проекта.
2. В корневой папке создайте директорию `/src`, где будет храниться весь код.
   - `index.js` – главный файл, который будет импортировать другие модули.
   - `transactions.js` – модуль для работы с массивом транзакций.
   - `ui.js` – модуль для работы с DOM (отрисовка таблицы, формы и т. д.).
   - `utils.js` – вспомогательные функции (например, генерация ID, форматирование даты).
3. Создайте `index.html` в корневой папке и подключите `index.js` с `type="module"`.
4. Создайте `style.css` и подключите его к HTML.

### Шаг 2. Представление транзакции

1. Создайте массив `transactions`, который будет содержать объекты транзакций.
2. Каждый объект транзакции должен иметь следующие поля:
   1. `id`: уникальный идентификатор транзакции.
   2. `date`: дата и время добавления транзакции.
   3. `amount`: сумма транзакции.
   4. `category`: категория транзакции.
   5. `description`: описание транзакции.

### Шаг 3. Отображение транзакций

1. Создайте пустую HTML-таблицу, куда в дальнейшем Вы будете добавлять транзакции.
2. Таблица должна содержать следующие столбцы:
   - Дата и Время
   - Категория транзакции
   - Краткое описание транзакции
   - Действие (кнопка удаления транзакции)

### Шаг 4. Добавление транзакций

1. Создайте функцию `addTransaction()`,
2. В функции `addTransaction()`:
   - Создайте объект транзакции с данными из формы.
   - Добавьте созданный объект в массив `transactions`.
   - Создайте новую строку таблицы с данными из объекта транзакции и добавьте её в таблицу.
     - Если транзакция совершена на положительную сумму, то строка таблицы должна быть **зеленым цветом**, иначе **красным**.
     - В колонке `description` отображайте краткое описание транзакции (первые 4 слова).

### Шаг 5. Управление транзакциями

1. В каждой строке таблицы добавьте кнопку удаления.
2. При клике на кнопку удаления получите идентификатор транзакции и удалите соответствующую строку таблицы и удалите данную транзакцию из массива.
3. Обработчик событий на `клик` на кнопку определите для элемента `<table>`

### Шаг 6. Подсчет суммы транзакции

1. Напишите функцию `calculateTotal()`, которая будет вызываться после добавления или удаления транзакции.
2. Отобразите общую сумму на странице, например, в отдельном элементе.

### Шаг 7. Отображение полное транзакции

1. В файле `index.html` создайте блок для отображения подробного описания транзакции.
2. При нажатии на строку с транзакцией в таблице, отображайте полное описание в элементе `<div>` или `<p>` ниже таблицы.

### Шаг 8. Добавление транзакции

1. Добавьте форму на страницу для добавления транзакции в таблицу (для категории используйте `select`).
2. _Доп. задание_: валидируйте форму на наличие ошибок.

---

## 3. Скриншоты работы 

<img src="./images/screen1.jpg" alt="screen1"> <br>

<img src="./images/screen2.jpg" alt="screen2"> <br>

<img src="./images/screen3.jpg" alt="screen3">

---

## 4. Контрольные вопросы

1. Каким образом можно получить доступ к элементу на веб-странице с помощью JavaScript?

    ```js 
    const v1 = document.getElementById("myId");
    const v2 = document.getElementsByTagName("div");
    const v3 = document.getElementsByClassName("myClass");
    const v4 = document.querySelector(".myClass");
    const v5 = document.querySelectorAll("div.myClass");
    ```

2. Что такое делегирование событий и как оно используется для эффективного управления событиями на элементах DOM?

    - Делегирование событий — это техника, при которой один обработчик события вешается на родительский элемент и перехватывает события от его дочерних элементов с помощью всплытия
    ```js
    document.getElementById("parent").addEventListener("click", function(event) {
    if (event.target.matches(".child")) {
        console.log("Нажат элемент с классом .child");
    }
    });
    ```

3. Как можно изменить содержимое элемента DOM с помощью JavaScript после его выборки?
    ```js
    element.innerHTML = "<tag> content </tag>";

    element.textContent = "any text";

    element.setAttribute("attributeName", "value");
    ```


4. Как можно добавить новый элемент в DOM дерево с помощью JavaScript?
    ```js
    // Создание нового элемента
    const newElement = document.createElement("div");
    newElement.textContent = "Привет, мир!";
    newElement.className = "myClass";

    // Добавление в DOM (в конец родителя)
    document.body.appendChild(newElement);

    // Или вставить перед/после другого элемента
    const parent = document.getElementById("container");
    const reference = document.getElementById("existingChild");
    parent.insertBefore(newElement, reference);

    ```